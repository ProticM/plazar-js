// PlazarJS
var pz;!function(l){"use strict";var c={moduleTypes:{class:"class",component:"component",mixin:"mixin"},types:{array:"[object Array]",object:"[object Object]",fn:"[object Function]",string:"[object String]",nodeList:"[object NodeList]"},typeNotFound:"Type [{0}] was not found within definitions",typeMustBeStringOrObject:"First parameter can be string or object",canNotCreate:"Can not create an instance based on provided arguments",canNotDefine:"Can not define type based on provided arguments",coreBaseTypes:["base","mixin"]},p=function(t,e,i){var n,s=function(t){if(l.isEmpty(t))throw new TypeError(c.canNotConvertNullOrEmptyObj);for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(!l.isEmpty(n))for(var r in n)l.isObject(n[r])?e[r]=s({},n[r]):l.isArray(n[r])?e[r]=n[r].slice():Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=!!l.isEmpty(i)||i?s({},t):t;return n=s(r,e),s=null,n},a=function(t,e){var i=!u(e)&&e;return r(t)?i?new t:t():t},e=function(t,e){return Object.prototype.toString.call(t)===e},i="isArray"in Array?Array.isArray:function(t){return e(t,c.types.array)},r=function(t){return e(t,c.types.fn)},s=function(t){return e(t,c.types.string)},n=function(t){return e(t,c.types.nodeList)},u=function(t,e){return!e&&(null==t||t=={})||!e&&""===t||(i(t)||n(t))&&!e&&0===t.length},o=function(t,e){return!u(t)&&!u(t.ownerType)&&t.ownerType==e},h=function(t,e,i,n){var r,s,o=!u(i)&&i,p=function(t){return o&&(t.id==e||t.type==e)||t.type==e||!l.isEmpty(t.alias)&&t.alias==e};return r=o?t.application.instances:t.definitions,s=n?r.filter(p):t.find(p,r),r=p=null,s};l.ns=function(t,e){!function(t,e){for(var i=t.split("."),n=window,r="",s=0,o=i.length;s<o;s++)n[r=i[s]]=n[r]||{},n=n[r]}(t)},l.defineStatic=function(t,e,i){var n=a(e),r=u(i)?"statics":i;u(window[r])&&l.ns(r);var s,o,p=1==(o=(s=r).split(".")).length?window[s]:o.reduce(function(t,e){return l.isString(t)?window[t][e]:t[e]});u(t)?l.assignTo(p,n,!1):p[t]=n},l.getDefinitionOf=function(t){var e=h(this,t);if(u(e)){var i=l.str.format(c.typeNotFound,t);throw new Error(i)}return e.definition},l.getInstanceOf=function(t,e){return h(this,t,!0,e)},l.defineApplication=function(t){var e=!l.isEmpty(t.components)&&l.isArray(t.components)?t.components:[];delete t.components,delete t.instances,p(l.application,t),u(window[t.namespace])&&this.ns(t.namespace,t),l.assignTo(window[t.namespace],t,!1),l.forEach(e,function(t){var e=l.getDefinitionOf(t);r(e.create)&&e.create()}),function(t,e){if(!u(e)&&r(e[t]))e[t].call(e)}("init",t)},l.find=function(t,e,i){var n="find"in Array.prototype?e.find(t,i):function(t,e,i){for(var n=0,r=t.length;n<r;n++)if(e.call(i||t,t[n],n))return t[n];return null}(e,t,i);return t=null,n},l.definitions=[],l.application={instances:[]},l.define=function(t,e){var i,n,r,s,o,p,a=this;if(l.isEmpty(t)||l.isEmpty(e))throw new Error(c.canNotDefine);return n=l.toObject(e),i=(o=l.isEmpty(n.ownerType)||-1!=c.coreBaseTypes.indexOf(t))?l.toFunction(n):(r=l.getDefinitionOf(n.ownerType),(s=l.isMixin(n))?l.assignTo(n,l.assignTo({},r.prototype),!1):r.extend(n)),o&&(i.extend=e.extend),s||(i.create=(p=t,function(){return a.create(p)})),this.definitions.push({type:t,definition:i}),i},l.create=function(t){var e,i,n,r,s,o;if(l.isEmpty(t))throw new Error(c.canNotCreate);return i=(e=l.isObject(t))?t.type:t,n=l.getDefinitionOf(i),e?(delete(s=p({},t,!1)).type,r=new n(s),l.assignTo(r,t,!1)):(r=new n).type=i,r.id=l.guid(),o=r,!l.isEmpty(o.require)&&l.isArray(o.require)&&l.forEach(o.require,function(t){var e=l.getInstanceOf(t),i=l.isEmpty(e)?l.getDefinitionOf(t):e,n=l.str.camelize(t);!l.isEmpty(i)&&l.isEmpty(o[n])&&(o[n]=l.isFunction(i)?l.create(t):i)}),(l.isComponent(r)||l.isClass(r))&&(r.applyMixins(),r.autoLoad&&r.load()),l.application.instances.push(r),r},l.toObject=a,l.toFunction=function(t){var e=function(){this.constructor=t.constructor};return r(e.prototype=t)?t:e},l.isTypeOf=e,l.isArray=i,l.isObject=function(t){return e(t,c.types.object)},l.isFunction=r,l.isString=s,l.isNodeList=n,l.isEmpty=u,l.is=o,l.isComponent=function(t){return o(t,c.moduleTypes.component)||1==t.isComponentInstance},l.isMixin=function(t){return o(t,c.moduleTypes.mixin)},l.isClass=function(t){return o(t,c.moduleTypes.class)},l.forEach=function(t,e,i){for(var n=u(t)?0:t.length,r=0;r<n;r++){var s=e.call(i||t[r],t[r],r,t);if(0==s)return s}e=null},l.proxy=function(e,i){var t,n;if(s(i)&&(t=e[i],i=e,e=t),r(e))return n=Array.prototype.slice.call(arguments,2),function(){var t=l.isComponent(i)&&i.destroyed?l.getInstanceOf(i.type):i;return e.apply(t||this,n.concat(Array.prototype.slice.call(arguments)))}},l.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},l.toJSON=function(t,e,i){var n,r=i||!1;try{n=r?JSON.stringify(t):JSON.parse(t)}catch(t){if(!e)throw new Error(t)}return n},l.assignTo=p,l.isInstanceOf=function(t,e){return t instanceof e}}(pz||(pz={})),pz.defineStatic("http",function(){"use strict";var l="Can not instantiate http request without options defined",c="Minimal configuration for ajax call was not provided. Please check you setup for following options [url], [method]",u={done:4},h={abort:0},e="POST",i="GET",d={json:"json",html:"html"};return{requests:{},latestRequestId:null,request:function(t){if(pz.isEmpty(t))throw new Error(l);!function(t){if(pz.isEmpty(t.url)||pz.isEmpty(t.method))throw new Error(c)}(t);var e,i,n,r,s,o,p,a={id:pz.guid(),aborted:!1,options:t,xhr:new XMLHttpRequest,abort:function(){this.xhr.abort(),this.xhr=null,this.aborted=!0}};return this.latestRequestId=a.id,n=(e=a).xhr,r=(i=t).success,s=i.fail,o=i.abort,p=i.dataType||d.json,n.onreadystatechange=function(){if((this.readyState!=u.done||this.status!=h.abort)&&this.readyState==u.done&&!pz.isEmpty(r)){var t={request:this,data:p==d.json?pz.toJSON(this.responseText):this.responseText,dataType:p};r.call(this,t),delete pz.http.requests[e.id]}},n.onerror=function(t){if(delete pz.http.requests[e.id],!s)throw new Error(t.target.statusText);s(t.target)},n.onabort=function(t){o&&o(t)},n.open(i.method,i.url,!0),pz.isString(i.data)&&(i.data=pz.toJSON(i.data)),n.send(i.data||null),this.requests[a.id]=a},abort:function(t){var e,i=t||!1,n=i?this.requests:this.requests[this.latestRequestId];if(!pz.isEmpty(n)){if(!i)return n.abort(),delete this.requests[this.latestRequestId],void(this.latestRequestId=null);e=pz.obj.getKeys(n),pz.forEach(e,function(t){var e=this.requests[t];e.abort(),delete this.requests[t],e=null},this),n=null,this.latestRequestId=null}},post:function(t){return t.method=e,this.request(t)},get:function(t){return t.method=i,this.request(t)}}},"pz"),pz.defineStatic("binder",function(){"use strict";var p,a,d,r,l,s,i,o,u,h,t,f;return h={idx:"$index",current:"$current",root:"$root",as:" as ",observed:"$observed",view:"$view"},f=function(){return pz.isEmpty(t)&&(t=RegExp("^"+pz.binder.prefix+"-","i")),t},o=function(t,e){var i=t.split(".");return 1==i.length?e:(i.pop(),i.reduce(function(t,e){return pz.isString(t)?window[t][e]:pz.isEmpty(t)?null:t[e]},e))},u=function(t,e,i){var n=null!=i,r=/^[a-z$][a-z0-9]*(?:\.[a-z0-9]+)+$/i.test(t),s=r&&-1!=t.indexOf(h.root);return t=s?t.split(".").slice(1).join("."):t,(!n||r||s?o(t,e):i)||o(t,i)},l=function(n){if(!pz.isObject(n)||n.$observed)return!1;var t=Object.keys(n);return pz.forEach(t,function(t){var e=n[t],i=s(n,e,t);i&&!pz.isInstanceOf(n,a)&&(n[t]=i),i||pz.isInstanceOf(n,p)||l(e)||pz.isFunction(e)||(n[t]=new p(n,t))}),n.$observed=!0},s=function(t,e,i){var n;return pz.isArray(e)&&(n=new a(t,e,i),pz.forEach(n,function(t){l(t)})),n},p=function(){function t(t,e){var n,i,r,s;return this.value=t[e],this.prop=e,this.subscriptions=[],n=this,s=(i=t)[r=e],delete i[r],Object.defineProperty(i,r,{configurable:!0,enumerable:!0,set:function(t){var e=null!=t.value||null!=t.value?t.value:t,i=e!=s&&null!=n.notify;s=e,i&&n.notify()},get:function(){var t=function(){return s};return t.subscribe=function(t,e){n.subscribe.call(n,t,e)},t.unsubscribe=function(t){n.unsubscribe.call(n,t)},t}}),this}return t.prototype.notify=function(){0!=this.subscriptions.length&&pz.forEach(this.subscriptions,function(t){t.update.call(this,t)},this)},t.prototype.subscribe=function(t,e){var i=this.subscriptions.length;this.subscriptions.push({id:e||i++,update:t})},t.prototype.unsubscribe=function(e){var t=this.subscriptions.filter(function(t){return t.id==e});pz.forEach(t,function(t){var e=this.subscriptions.indexOf(t);this.subscriptions.splice(e,1)},this)},t}(),a=function(){var o="pop push shift unshift splice reverse sort".split(" "),t="slice concat join some every forEach map filter reduce reduceRight indexOf lastIndexOf toString toLocaleString".split(" "),s=Array.prototype;function e(t,e,i){e=e||[],this.subscriptions=[],this.prop=i;for(var n=0;n<e.length;n++)this.push(e[n]);var r=this.length;return this.hasData=0<r,Object.defineProperty(this,"length",{configurable:!1,enumerable:!0,set:function(t){var e;r<t&&(e="push"==this.__action?this[r]:this[0],l(e)),t!=r&&(r=t,this.hasData=0<r)},get:function(){return r}}),this.hasData=new p(this,"hasData"),this}return e.prototype=[],pz.forEach(o,function(n){var r=s[n];e.prototype[n]=function(){this.__action=n;var t=r.apply(this,arguments),e=this.subscriptions.filter(function(t){return t.name==n})[0];if(e){var i=s.slice.call(arguments);e.callback.apply(this,i)}return delete this.__action,t}}),pz.forEach(t,function(t){e.prototype[t]=s[t]}),e.prototype.subscribe=function(e,i){this.subscriptions.splice(0,this.subscriptions.length),pz.forEach(o,function(t){!function(t,e,i,n,r){if(!o[i])throw new Error("Can not "+(e?"subscribe to":"unsubscribe from")+" action named: ["+i+"]");var s=t.subscriptions.length;t.subscriptions.push({id:r||s++,name:i,callback:n})}(this,!0,t,e,i)},this),e=null},e.prototype.unsubscribe=function(e){var t=this.subscriptions.filter(function(t){return t.id==e});pz.forEach(t,function(t){var e=this.subscriptions.indexOf(t);this.subscriptions.splice(e,1)},this)},e.prototype.getFirst=function(){return this.getAt(0)},e.prototype.getLast=function(){return this.getAt(this.length-1)},e.prototype.getAt=function(t){return pz.isEmpty(t)?null:this[t]},e.prototype.removeAll=function(){this.splice(0,this.length)},e}(),i={parse:function(t){var a,n,e,l,c,r,s;3==t.nodeType&&0!=t.textContent.length&&(-1!=t.textContent.indexOf(pz.binder.delimiters[0])&&-1!=t.textContent.indexOf(pz.binder.delimiters[1])&&(a=[],c=(l=this).ctx||this.vm,n=function(t,p){t.el.textContent=t.tpl.replace(/{([^}]*)}/g,function(t,e){var i,n,r,s;r=-1!=(e=e.replace(/ +?/g,"")).indexOf(h.current),s=-1!=e.indexOf(h.idx),n=r?c:s?l.index:c[e],/^[a-z$][a-z0-9]*(?:\.[a-z0-9]+)+$/i.test(e)&&(i=e.split(".").pop(),n=l.ctx&&l.ctx[i]||l.vm[i]||u(e,l.vm,l.ctx)[i],i=null),p||a.push(e);var o=pz.isEmpty(n)?t:pz.isFunction(n)?n():n;return n=null,o})},this.elsData||(this.elsData=[]),e={el:t,tpl:t.textContent.trim()},this.elsData.push(e),n(e,!1),s=(r=this).elsData,pz.forEach(a,function(t){var e=u(t,r.vm,r.ctx),i=e[t.split(".").pop()];i&&i.subscribe(function(){pz.forEach(s,function(t){n(t,!0)})}),e=null}),a.splice(0,a.length),this.elsData.splice(0,a.length)))}},d=function(){function t(t,e,i,n,r){var s,o,p,a,l=(p=-1!=(s=i).indexOf(h.as),a={keypath:s,alias:null},p&&(o=s.split(h.as),a.keypath=o.shift().trim(),a.alias=o.pop().trim(),o=null),a);return this.id=pz.guid(),this.el=t,this.view=r,this.type=e,this.keypath=l.keypath.trim(),this.alias=l.alias||null,this.bindingAttr=n,this.prop=l.keypath.split(".").pop(),this.rootVm=r.vm,this.vm=u(l.keypath,r.vm,r.ctx),this.binder=pz.binder.binders[this.type],this.handler=this.binder.handler?pz.proxy(this.binder.handler,this):void 0,r=null,this}return t.prototype.bind=function(){var t,e=this.vm[this.prop];this.binder.bind&&this.binder.bind.call(this),this.binder.react&&e&&e.subscribe&&(t=this,e.subscribe(function(){t.binder.react.call(t)},t.id)),this.binder.react&&this.binder.react.call(this)},t.prototype.unbind=function(){var t=this.vm[this.prop];t&&t.unsubscribe&&t.unsubscribe(this.id),pz.isFunction(this.binder.unbind)&&this.binder.unbind.call(this)},t.prototype.getValue=function(){var t;return this.prop==h.current?this.vm:this.prop==h.idx?this.view.index:(t=this.vm[this.prop],pz.isFunction(t)?this.vm[this.prop].call(this):this.vm[this.prop])},t.prototype.setValue=function(t){return this.vm[this.prop]=t},t}(),r=function(){function t(t,e,i,n){return this.els=pz.isArray(t)||pz.isNodeList(t)?t:[t],this.vm=e,this.ctx=i||null,this.index=pz.isEmpty(n)?null:n,this.buildBindings(),e=null,this}return t.prototype.bind=function(){pz.forEach(this.bindings,function(t){t.bind()})},t.prototype.unbind=function(){pz.forEach(this.bindings,function(t){t.unbind()})},t.prototype.buildBindings=function(){this.bindings=[];var h,e=(h=this,function(t){pz.forEach(t,function(c){var u=c.hasAttribute&&c.hasAttribute(pz.binder.prefix+"-each"),t=u?[c.getAttributeNode(pz.binder.prefix+"-each")]:c.attributes||[];pz.forEach(t,function(t){if(f().test(t.name)){var e=(s=t.name,-1!=(o=s.indexOf("["))&&-1!=(p=s.indexOf("]"))?(a=s.substring(o+1,p),(l=(s=s.replace("-["+a+"]","")).split("-")).push(a),l):s.split("-")),i=e[1],n=e[2];if(!pz.isEmpty(pz.binder.binders[i])){var r=new d(c,i.toLowerCase(),t.value,t.name,h);n&&(r.attrToBind=n),h.bindings.push(r),u=u||r.binder.block,r=null}}var s,o,p,a,l}),u||pz.forEach(c.childNodes,function(t){e([t]),i.parse.call(h,t)})})});e(this.els),this.bindings.sort(function(t,e){return t.binder.priority-e.binder.priority})},t}(),{prefix:"data",delimiters:["{","}"],bind:function(t,e){if(e.$view)e.$view.bind();else{l(e);var i=new r(t,e);i.bind(),e.$view=i,i=null}},unbind:function(t){t.$view&&t.$view.unbind()},toJSON:function(t){var p=function(s,o){var t,e=(t=s,Object.keys(t).filter(function(t){return t!=h.observed&&t!=h.view}));return pz.forEach(e,function(n){var t=pz.isObject(s[n]),e=pz.isFunction(s[n]),i=pz.isInstanceOf(s[n],a);if(t&&p(s[n],o),i){o[n]=[];var r=Object.keys(s[n]).filter(function(t){return!isNaN(parseInt(t))});pz.forEach(r,function(t){var e=s[n][t],i=pz.isObject(e)?p(e,{}):pz.isFunction(e)?e():e;o[n].push(i)})}e&&(o[n]=s[n]())}),o};return p(t,{})},binders:{value:{priority:3,bind:function(){var t,e,i="INPUT"==this.el.nodeName,n="OPTION"==this.el.nodeName,r="SELECT"==this.el.nodeName,s="TEXTAREA"==this.el.nodeName;if(!(i||n||r||s))throw new Error("Value binding is supported only on INPUT, OPTION or SELECT element");t=i||s?"oninput"in window?"input":"keyup":"change",e=i&&"text"==this.el.type||s,(r||e)&&pz.isFunction(this.handler)&&(this.el.removeEventListener(t,this.handler,!1),this.el.addEventListener(t,this.handler,!1),this.event=t),this.el.removeAttribute(this.bindingAttr)},react:function(){var t="INPUT"==this.el.nodeName,e="SELECT"==this.el.nodeName,i="TEXTAREA"==this.el.nodeName;t&&"text"==this.el.type||e||i?this.el.value=this.getValue():this.el.setAttribute("value",this.getValue())},handler:function(){this.setValue(this.el.value)},unbind:function(){this.el.removeEventListener(this.event,this.handler,!1)}},each:{priority:1,block:!0,bind:function(){this.mark||(this.mark=document.createComment("each:"+this.id),this.el.removeAttribute(this.bindingAttr),this.el.parentNode.insertBefore(this.mark,this.el),this.el.parentNode.removeChild(this.el)),this.views||(this.views=[])},react:function(){var n,t=this.getValue();pz.forEach(this.views,function(t){t.unbind(),pz.forEach(t.els,function(t){t.parentNode.removeChild(t),t=null}),t.els.splice(0,t.els.length)}),this.views.splice(0,this.views.length),pz.forEach(t,function(t,e){this.alias&&(this.rootVm[this.alias]=t),n=this.el.cloneNode(!0);var i=new r(n,this.rootVm,t,e);i.bind(),this.mark.parentNode.insertBefore(n,this.mark),this.views.push(i)},this),delete this.rootVm[this.alias]},unbind:function(){pz.forEach(this.views,function(t){t.unbind()})}},text:{priority:3,bind:function(){this.el.removeAttribute(this.bindingAttr)},react:function(){var t=this.el.hasOwnProperty("innerText");this.el[t?"innerText":"innerHTML"]=this.getValue()}},if:{priority:2,bind:function(t){var e=null!=t?t:this.getValue();this.el.removeAttribute(this.bindingAttr),e||pz.isEmpty(this.el.parentNode)||this.el.parentNode.removeChild(this.el)}},ifnot:{priority:2,bind:function(){var t=this.getValue();pz.binder.binders.if.bind.call(this,!t)}},visible:{priority:2,bind:function(){this.el.removeAttribute(this.bindingAttr)},react:function(t){var e=null!=t?t:this.getValue();null==this.initialValue&&(this.initialValue=this.el.style.display),this.el.style.display=1==e?"none"==this.initialValue?"":this.initialValue:"none"}},hidden:{bind:function(){pz.binder.binders.visible.bind.call(this)},react:function(){var t=this.getValue();pz.binder.binders.visible.react.call(this,!t)}},html:{bind:function(){this.el.removeAttribute(this.bindingAttr)},react:function(){this.el.innerHTML=this.getValue()}},attr:{priority:2,bind:function(){this.el.removeAttribute(this.bindingAttr)},react:function(){var t="class"==this.attrToBind,e=this.getValue();t&&this.el.hasAttribute(this.attrToBind)&&(e=(this.el.getAttribute(this.attrToBind)+" "+e).trim()),this.el.setAttribute(this.attrToBind,e.toString())}},checked:{bind:function(){this.el.removeEventListener("change",this.handler,!1),this.el.addEventListener("change",this.handler,!1),this.event="change",this.el.removeAttribute(this.bindingAttr)},react:function(){var t="radio"==this.el.type,e=this.getValue();this.el.checked=t?e==this.el.value:e},handler:function(){var t="radio"==this.el.type;this.setValue(t?this.el.value:this.el.checked)},unbind:function(){this.el.removeEventListener(this.event,this.handler,!1)}},enabled:{bind:function(){this.el.removeAttribute(this.bindingAttr)},react:function(){var t=this.getValue();this.el.disabled=!t}},options:{priority:1,block:!0,tempAttrs:{val:null,text:null},bind:function(){this.el.removeAttribute(this.bindingAttr),this.views||(this.views=[]),this.binder.tempAttrs.val=this.binder.tempAttrs.val||this.el.getAttribute("data-optionsvalue"),this.binder.tempAttrs.text=this.binder.tempAttrs.text||this.el.getAttribute("data-optionstext"),this.el.removeAttribute("data-optionsvalue"),this.el.removeAttribute("data-optionstext")},react:function(){var t=this.getValue();pz.forEach(this.views,function(t){t.unbind(),pz.forEach(t.els,function(t){t.parentNode.removeChild(t),t=null}),t.els.splice(0,t.els.length)}),this.views.splice(0,this.views.length),pz.forEach(t,function(t,e){var i=document.createElement("option");i.setAttribute("data-value",this.binder.tempAttrs.val),i.setAttribute("data-text",this.binder.tempAttrs.text);var n=new r(i,this.rootVm,t,e);n.bind(),this.el.appendChild(i),this.views.push(n),i=null},this)}},unbind:function(){pz.forEach(this.views,function(t){t.unbind()})}}}},"pz"),pz.defineStatic("arr",function(){"use strict";return{clear:function(t){pz.isEmpty(t)||t.splice(0,t.length)},find:function(t,e,i){return pz.find(t,e,i)},contains:function(t,e,i){var n;return pz.isFunction(e)?(n=pz.arr.find(e,t),!pz.isEmpty(n)):!pz.isEmpty(t)&&-1!=t.indexOf(e,i)},filter:function(t,e){var i=e.filter(t);return t=null,i},merge:function(){var t=Array.prototype.slice.call(arguments),e=[];return pz.forEach(t,function(t){e=e.concat(t)}),e},map:function(t,e,i){var n=e.map(t,i);return t=null,n},removeAt:function(t,e){pz.isEmpty(t)||pz.isEmpty(e)||t.splice(e,1)}}},"pz"),pz.defineStatic("str",function(){"use strict";return{camelize:function(t){return pz.isEmpty(t)?"":t.replace(/^([A-Z])|[\s-_](\w)/g,function(t,e,i,n){return i?i.toUpperCase():e.toLowerCase()})},capitalize:function(t){return pz.isEmpty(t)?"":t.charAt(0).toUpperCase()+t.substr(1)||""},contains:function(t,e){return!pz.isEmpty(t)&&!pz.isEmpty(e)&&-1!=t.indexOf(e)},format:function(){var t=Array.prototype.slice.call(arguments),i=t[0],e=t.splice(1),n="";return pz.isEmpty(i)||pz.isEmpty(e)||pz.forEach(e,function(t,e){n=pz.isEmpty(n)?i.replace("{"+e+"}",t):n.replace("{"+e+"}",t)}),n}}},"pz"),pz.defineStatic("dom",function(){"use strict";var c=/<([^\s>]+)(\s|>)+/,u={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]};u.optgroup=u.option,u.tbody=u.tfoot=u.colgroup=u.caption=u.thead,u.th=u.td;var i=function(t,e,i){pz.isEmpty(t)||pz.isEmpty(e)||t.insertAdjacentHTML(i,pz.isString(e)?e:e.outerHTML)},h={data:[],fn:function(e){for(var t,i,n,r,s,o=null,p=!1,a=0,l=!0,c=h.data.filter(function(t){return t.type==e.type});!pz.isEmpty(n=c[a])&&!(p=pz.dom.elementMatches(e.target,n.selector));)a++;if(r=p?n.selector:void 0,s=p?n.fn:void 0,n=null,(i=p)&&(o=e.target),!i){var u=pz.dom.findParent(e.target,r);(l=pz.isEmpty(u))||(o=u)}(t=i||!l)&&pz.isEmpty(o)&&(o=this),t&&s.call(this,o,e)}};return{clone:function(t){return t.cloneNode(!0)},replaceWith:function(t,e){pz.isEmpty(t)||pz.isEmpty(e)||(t.parentNode.replaceChild(e,t),t=null)},append:function(t,e){pz.isEmpty(t)||pz.isEmpty(e)||(pz.isString(e)&&(e=this.parseTemplate(e)),t.appendChild(e))},prepend:function(t,e){i(t,e,"afterbegin")},insertBefore:function(t,e){i(t,e,"beforebegin")},insertAfter:function(t,e){i(t,e,"afterend")},findElement:function(t,e,i){return pz.isEmpty(e)?null:this.getEl(e,{rootEl:t,all:i||!1})},elementMatches:function(t,e){return(Element.prototype.matches||Element.prototype.msMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),i=e.length;0<=--i&&e.item(i)!==this;);return-1<i}).call(t,e)},findParent:function(t,e,i){for(var n=null;!pz.isEmpty(t);){if(this.elementMatches(t,e)){n=t;break}if(i&&this.elementMatches(t,i))break;t=t.parentElement}return n},on:function(t,e,i,n){var r,s,o,p,a;pz.isEmpty(n)||(r=pz.isEmpty(e)?document:e,o=this,p=r,a=t,s=pz.find(function(t){return t.el==p&&(!!pz.isEmpty(a)||t.event==a)},o.listeners),h.data.push({selector:i,fn:n,type:t}),pz.isEmpty(s)&&(r.addEventListener(t,h.fn),this.listeners.push({el:r,event:t})))},getByAttr:function(t,e){var i="*[".concat(e||"data-template").concat('="').concat(t).concat('"]');return document.querySelector(i)},getEl:function(t,e){var i=e&&e.all||!1,n=(e&&e.rootEl||document)[i?"querySelectorAll":"querySelector"](t);return pz.isEmpty(n)?null:1==n.length&&"FORM"!=n.nodeName?n[0]:n},parseTemplate:function(t){var e,i,n,r,s,o,p,a,l;if(!pz.isString(t))return null;if(n=t.trim(),s=c.exec(n),pz.isEmpty(s))return null;for(a=document.createDocumentFragment(),e=s[1],o=u[e],p=pz.isEmpty(o),(i=a.appendChild(this.createElement("div"))).innerHTML=p?n:o[1].concat(n).concat(o[2]),r=p?0:o[0];r--;)i=i.lastChild;return l=1==i.childNodes.length?i.lastChild:i.childNodes,i=a=null,l},createElement:function(t){var e;try{e=document.createElement(t)}catch(t){throw t}return e},remove:function(t){var e;pz.isEmpty(t)||((e=t.parentNode)&&e.removeChild(t),t=null)},insertAt:function(t,e,i){var n;if(!pz.isEmpty(t)&&!pz.isEmpty(i))if(pz.isEmpty(t.childNodes))this.prepend(t,e);else{if(n=t.childNodes[i],pz.isEmpty(n))throw new Error("Node at index: "+i+" was not found.");t.insertBefore(e,n)}},off:function(n,r){var s,t=pz.find(function(t,e){var i=t.el==n&&(!!pz.isEmpty(r)||t.event==r);return i&&(s=e),i},this.listeners);pz.isEmpty(t)||t.el.removeEventListener(t.event,h.fn),this.listeners.splice(s,1)},listeners:[],indexOf:function(t){for(var e=0;null!=(t=t.previousSibling);)e++;return e}}},"pz"),pz.defineStatic("obj",function(){"use strict";return{assignTo:function(t,e,i){return pz.assignTo(t,e,i)},clone:function(t){return this.assignTo({},t)},getKeys:Object.keys,getValues:function(t){var e,i=[];if("values"in Object)return Object.values(t);for(e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i}}},"pz"),function(){var t=function(){"use strict";return{mixins:[],init:function(){},destroy:function(){var t=pz.application.instances.indexOf(this);-1!=t&&pz.application.instances.splice(t,1)},applyMixins:function(){var n=this;pz.forEach(this.mixins,function(t){var e=pz.getDefinitionOf(t),i=pz.obj.clone(e);delete i.ownerType,pz.obj.assignTo(n,i,!1)})}}};t.extend=function t(e){var i,o,r,s,p,n=pz.toObject(e),a=this,l=(i=a,r=(o=n)&&o.constructor&&o.constructor!=={}.constructor,s=pz.obj.getKeys(o).reduce(function(t,e){return t[pz.isFunction(o[e])?"fnKeys":"attrKeys"].push(e),t},{fnKeys:[],attrKeys:[]}),((p=function(){var t,n=this;return pz.forEach(s.attrKeys,function(t){if(!n.hasOwnProperty(t)&&!pz.isEmpty(o[t],!0)){var e=pz.isArray(o[t]),i=pz.isObject(o[t]);n[t]=e?o[t].slice():i?pz.obj.clone(o[t]):o[t]}}),this.base=r?i:null,t=r?o.constructor.apply(this,arguments):i.apply(this,arguments),this.base=null,t||n}).prototype=Object.create(i.prototype)).constructor=p,pz.forEach(s.fnKeys,function(t){var n,r,s;p.prototype[t]="constructor"==t?p.prototype.constructor:(r=o[n=t],s=i.prototype,function(){var t=this.base,e=!pz.isEmpty(s[n])&&pz.isFunction(s[n]);this.base=e?s[n]:function(){throw new Error("Method named: ["+n+"] was not found on type: ["+this.ownerType+"]")};var i=r.apply(this,arguments);return this.base=t,i})}),p.extend=t,p);return a=n=null,l},pz.define("base",t),t=null}(),pz.define("class",function(){"use strict";return{ownerType:"base"}}),pz.define("component",function(){"use strict";var d={tplSourceNotDefined:"Template source not defined. Please define one of these options in your component config: 1. [template]; 2. [templateSelector]; 3. [ajaxSetup.url]",tplContainerNotDefined:"Template container selector not defined. Please define one of these options in your component config: 1. [renderTo]; 2. [templateSelector]; 3. [renderBefore]; 4. [renderAfter];",tplContainerNotFound:"Template container not found. Please review one of these options in your component config: 1. [renderTo]; 2. [templateSelector]; 3. [renderBefore]; 4. [renderAfter];",tplContainerNotFoundWithinComponent:"Template container not found within parent retrieved via selector: [{0}]. Please review one of these options in your component config: 1. [renderTo]; 2. [templateSelector]; 3. [renderBefore]; 4. [renderAfter];",loadingMaskMarkup:'<div class="loading-mask" style="color:#fff;background-color: #fff;position:absolute;top:0;left:0;bottom:0;width:100%;text-align:center;vertical-align:middle;height:100%">'.concat('<p style="position: absolute;top:40%;left:41.5%;background-color: #fff;padding: 5px;border: 1px solid #f1f1f1;color: #c0c0c0;z-index:1">loading...</p></div>'),addChildParamErr:"Component you're trying to add, or it's [type] property has not been provided via parameter for [addChild] function. Example invocation: parent.addChild({ type: 'myType' })",renderBeforeAndAfterDefined:"[renderBefore] and [renderAfter] config can not be defined on the same component",handlerFnNotProvided:"Handler function was not provided.",canNotDestroyComponent:"You can not destroy a component with attached pre-rendered template."};return{constructor:function(){this.isComponentInstance=!0},ownerType:"base",replace:!1,initialized:!1,animate:!1,showLoading:!1,autoLoad:!1,css:[],attrs:[],style:"",bindViewModel:function(){var t;if(!pz.isEmpty(this.viewModel)&&pz.isFunction(this.applyBindings)){if(t=pz.isEmpty(this.templateSelector),this.applyBindings(),!t){var e=pz.dom.getByAttr(this.templateSelector);pz.dom.replaceWith(e,this.html),e=null}this.publish("bindings-complete",null,this)}},applyBindings:function(){pz.binder.bind(this.html,this.viewModel)},unapplyBindings:function(){pz.binder.unbind(this.viewModel)},traceUp:function(){return pz.isEmpty(this.parentComponent)?null:pz.isEmpty(this.parentComponent.$ref)?pz.getInstanceOf(this.parentComponent.id):this.parentComponent.$ref},traceDown:function(e){if(pz.isEmpty(this.components))return null;var t=this.components.filter(function(t){return t.type==e||t.id==e||t.alias==e}).map(function(t){return pz.getInstanceOf(t.id)});return 1==t.length?t[0]:t},load:function(){var t,e=pz.isEmpty(this.templateSelector),i=pz.isEmpty(this.template),n=pz.isEmpty(this.ajaxSetup)||pz.isEmpty(this.ajaxSetup.url);if(i&&e&&n)throw new Error(d.tplSourceNotDefined);n?this.render():(this.showLoadingMask(),t=pz.proxy(function(t){var e="text"==this.ajaxSetup.dataType?{template:t.data}:t.data;this.viewModel=pz.isEmpty(e.viewModel)?this.viewModel:e.viewModel,this.template=pz.isEmpty(e.template)?pz.dom.getByAttr(this.templateSelector).outerHTML:e.template,this.publish("load-complete",null,this),this.render()},this),pz.http.get({url:this.ajaxSetup.url,dataType:this.ajaxSetup.dataType,data:this.ajaxSetup.data,success:t}),t=null)},render:function(){var r,t,e,i,n,s,o,p,a,l,c,u,h=pz.isEmpty(this.templateSelector);if(this.html=h?pz.dom.clone(pz.dom.parseTemplate(this.template)):pz.dom.getByAttr(this.templateSelector),(r=this).addAttr({name:"data-componentId",value:this.id}),this.addCss(this.css),this.addAttr(this.attrs),this.addStyle(this.style),h){if(t=!pz.isEmpty(this.renderTo),o=!pz.isEmpty(this.renderAfter),s=!pz.isEmpty(this.renderBefore),!t&&!o&&!s)throw new Error(d.tplContainerNotDefined);if(l=(c=!pz.isEmpty(this.parentComponent))?pz.str.format("{0} {1}",this.renderTo,(s?this.renderBefore:this.renderAfter)||"").trim():t?this.renderTo:s?this.renderBefore:this.renderAfter,e=pz.dom.getEl(l),pz.isEmpty(e))throw u=c?pz.str.format(d.tplContainerNotFoundWithinComponent,l.split("]").pop().trim()):d.tplContainerNotFound,new Error(u);a=function(t,e){var i=r.traceUp(),n=pz.isEmpty(i)?document:i.html;p=pz.dom.getEl(t,{rootEl:n,all:!1}),pz.dom[e](p,r.html),r.html=pz.dom.getEl('*[data-componentid="'+r.id+'"]',{rootEl:n,all:!1})},s?a(l,"insertBefore"):o?a(l,"insertAfter"):pz.isEmpty(this.insertAt)?pz.dom[this.replace?"replaceWith":"append"](e,this.html):(i=this.traceUp().childAt(this.insertAt),n=pz.isEmpty(i)?0:pz.dom.indexOf(i.html),pz.dom.insertAt(e,this.html,n)),this.publish("render-complete",null,this),this.init()}else this.init()},init:function(){var t,r=this;this.bindViewModel(),pz.isEmpty(this.handlers)||pz.forEach(this.handlers,function(t){r.handle(t)}),this.hideLoadingMask(),this.initialized=!0,this.publish("init-complete",null,this),pz.isEmpty(this.components)||(t=this.components.reduce(function(t,e,i){var n=pz.isEmpty(e.id)?null:r.traceDown(e.id);return(pz.isEmpty(n)||!n.initialized)&&t.push({index:i,component:e}),t},[]),pz.forEach(t,function(t){t.component.$replace=!0,r.addChild(t.component,t.index)}),pz.arr.clear(t),t=null),pz.isEmpty(this.parentComponent)||pz.isEmpty(this.parentComponent.ref)||(this.parentComponent.$ref=null,delete this.parentComponent.$ref)},subscribe:function(t){!pz.isEmpty(t)&&pz.isObject(t)&&(this.triggers=pz.obj.assignTo(this.triggers,t))},publish:function(n,e,t){var i=function(t,e){var i=pz.isEmpty(t.triggers)?null:t.triggers[n];pz.isEmpty(i)||i.call(t,e)};if(pz.isEmpty(t))pz.application.instances.filter(function(t){return pz.isComponent(t)}).forEach(function(t){i(t,e)});else{var r=pz.isString(t)?pz.getInstanceOf(t):t;i(r,e)}},addChild:function(t,e){var i,n,r,s,o=t.$replace;if(pz.isEmpty(t)||pz.isEmpty(t.type))throw new Error(d.addChildParamErr);return delete t.$replace,i='*[data-componentid="'+this.id+'"]',t.autoLoad=!1,n=pz.create(t),s=t.renderTo||n.renderTo,n.renderTo=pz.isEmpty(s)?i.concat(pz.isEmpty(this.containerElement)?"":" "+this.containerElement):"root"==s?i:i.concat(" ").concat(s),n.parentComponent={type:this.type,id:this.id},pz.isEmpty(n.renderAfter)&&pz.isEmpty(n.renderBefore)||(n.parentComponent.$ref=this),pz.isEmpty(e)||o||(n.insertAt=e),n.autoLoad||n.load(),!pz.isEmpty(this.components)||(this.components=[]),r={type:n.type,id:n.id},pz.isEmpty(n.alias)||(r.alias=n.alias),pz.isEmpty(e)?this.components.push(r):this.components.splice(e,o?1:0,r),r=null,n},handle:function(t){var e=pz.isFunction(t.fn)?t.fn:this[t.fn];if(pz.isEmpty(e))throw new Error(d.handlerFnNotProvided);var i=[t.on,this.html,t.selector,pz.proxy(e,t.scope||this)];pz.dom.on.apply(pz.dom,i)},showLoadingMask:function(){var t=!pz.isEmpty(this.renderTo);if(this.showLoading){var e=this.html;pz.isEmpty(e)&&(e=t?pz.dom.getEl(this.renderTo):pz.dom.getByAttr(this.templateSelector)),pz.isEmpty(e)||pz.dom.append(e,d.loadingMaskMarkup),e=null}},hideLoadingMask:function(){var t,e=!pz.isEmpty(this.renderTo);if(this.showLoading){if(t=this.html,pz.isEmpty(t)&&(t=e?pz.dom.getEl(this.renderTo):pz.dom.getByAttr(this.templateSelector)),!pz.isEmpty(t)){var i=pz.dom.findElement(t,"div.loading-mask");pz.isEmpty(i)||(pz.dom.remove(i),i=null)}t=null}},lastChild:function(){return pz.isEmpty(this.components)?null:this.childAt(this.components.length-1)},firstChild:function(){return this.childAt(0)},childAt:function(t){if(pz.isEmpty(this.components)||pz.isEmpty(t))return null;var e=this.components[t];return pz.isEmpty(e)?null:pz.getInstanceOf(e.id)||null},removeChild:function(t,e){var i,n;pz.isEmpty(t)||(i=!!pz.isEmpty(e)||e,n=this.childIndex(t),i&&t.destroy(),-1!=n&&this.components.splice(n,1),t=null)},childCount:function(){return pz.isEmpty(this.components)?0:this.components.length},childIndex:function(i){var n=-1;return pz.isEmpty(i)||pz.arr.find(function(t,e){return t.id==i.id&&(n=e),t.id==i.id},this.components),n},destroy:function(){var t;if(!pz.isEmpty(this.templateSelector))throw new Error(d.canNotDestroyComponent);this.publish("before-destroy",null,this),this.destroyChildren(),pz.dom.off(this.html),pz.isEmpty(this.viewModel)||this.unapplyBindings(),pz.dom.remove(this.html),this.html=null,this.triggers=null,this.viewModel=null,pz.arr.clear(this.components),pz.arr.clear(this.handlers),pz.arr.clear(this.mixins),t=this.traceUp(),pz.isEmpty(t)||t.removeChild(this,!1),this.destroyed=!0,this.base(arguments),this.publish("destroy-complete",null,this)},destroyChildren:function(){for(var t;!pz.isEmpty(this.components)&&null!=(t=this.components[0])&&!pz.isEmpty(t.id);)pz.getInstanceOf(t.id).destroy(),null},addCss:function(t,e){var i,n,r,s;pz.isEmpty(t)||(r=pz.isEmpty(e)?this.html:pz.isString(e)?pz.dom.findElement(this.html,e):e,pz.isEmpty(r)||(i=pz.isArray(t),n=!pz.isEmpty(r.className),s=i?t.join(" "):t,r.className+=n?" "+s:s))},addStyle:function(t,e){var i,n,r,s;pz.isEmpty(t)||(r=pz.isEmpty(e)?this.html:pz.isString(e)?pz.dom.findElement(this.html,e):e,pz.isEmpty(r)||(i=pz.isArray(t),n=!pz.isEmpty(r.style.cssText),s=i?t.join(" "):t,r.style.cssText+=n?" "+s:s))},addAttr:function(t,e){var i,n;pz.isEmpty(t)||(i=pz.isEmpty(e)?this.html:pz.isString(e)?pz.dom.findElement(this.html,e):e,pz.isEmpty(i)||(n=pz.isArray(t)?t:[t],pz.forEach(n,function(t){i.setAttribute(t.name,t.value)}),n=null))},clearHtml:function(){pz.forEach(this.html.childNodes,function(t){pz.dom.remove(t)},this)}}}),pz.define("mixin",function(){"use strict";return{}});